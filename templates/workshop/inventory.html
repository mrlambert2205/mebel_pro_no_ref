{% extends 'base.html' %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-boxes"></i> Складской учет</h2>
    <div class="btn-group">
        <a href="{% url 'purchase_create' %}" class="btn btn-success">+ Закупка</a>
        <a href="{% url 'production_create' %}" class="btn btn-warning">В цех</a>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Артикул</th>
                <th>Наименование</th>
                <th>Категория</th>
                <th>Тип</th>
                <th>Остаток</th>
                <th>Цена (закуп)</th>
                <th>Статус</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td><code>{{ item.sku }}</code></td>
                <td><strong>{{ item.name }}</strong></td>
                <td>{{ item.category.name }}</td>
                <td>
                    {% if item.item_type == 'MATERIAL' %}
                        <span class="badge bg-info text-dark">Сырье</span>
                    {% else %}
                        <span class="badge bg-primary">Продукт</span>
                    {% endif %}
                </td>
                <td>{{ item.quantity }} {{ item.unit }}</td>
                <td>{{ item.price_buy }} тг</td>
                <td>
                    {% if item.quantity <= item.min_limit %}
                        <span class="text-danger fw-bold"><i class="bi bi-arrow-down-circle"></i> Дефицит</span>
                    {% else %}
                        <span class="text-success"><i class="bi bi-check-circle"></i> В наличии</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="7" class="text-center py-4 text-muted">Склад пуст. Добавьте товары через админку или закупку.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}